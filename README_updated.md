
<p align="center">
    <a href="https://github.com/spur27/RenWeb">
        <img height=250 src="https://github.com/SpurSlicer/RenWeb/blob/main/docs/assets/renweb.png" alt="RenWeb ~ A FOSS Software SDK">
    </a>
</p>

![Ubuntu](https://github.com/SpurSlicer/RenWeb/actions/workflows/ubuntu_make_test.yml/badge.svg)
![Fedora](https://github.com/SpurSlicer/RenWeb/actions/workflows/fedora_make_test.yml/badge.svg)
![Windows](https://github.com/SpurSlicer/RenWeb/actions/workflows/windows_make_test.yml/badge.svg)
![MacOS](https://github.com/SpurSlicer/RenWeb/actions/workflows/macos_make_test.yml/badge.svg)

## Table of Contents
- [Introduction](#introduction)
## Table of Contents
- [Introduction](#introduction)
- [Compilation](#compilation)
  - [Linux](#linux)
  - [MacOS](#macos)
  - [Windows](#windows)
- [File Structure](#file-structure)
  - [Core Files](#core-files)
  - [Directory Structure](#directory-structure)
- [Configuration Files](#configuration-files)
  - [info.json](#infojson)
  - [config.json](#configjson)
- [Web Server](#web-server)
  - [File Resolution Order](#file-resolution-order)
  - [HTTP Range Requests](#http-range-requests)
- [Command Line Arguments](#command-line-arguments)
- [Building Pages](#building-pages)
- [Client-Side API](#client-side-api)
- [Credits](#credits)
- [License](#license)

## Introduction

RenWeb is a modern framework for building cross-platform GUI applications using web technologies (HTML, CSS, JavaScript) with a C++ backend. It combines a WebKit-based webview engine with an embedded HTTP server, providing a complete solution for creating desktop applications with web interfaces.

<p align="center">
    <img height=500 src="https://github.com/SpurSlicer/RenWeb/blob/main/docs/assets/window_example_1.png" alt="Window displaying the test page">
</p>

**Key Features:**
- Embedded multi-threaded HTTP server with WebSocket support
- Full HTTP Range request support for media streaming
- Process management for multi-window applications
- Configurable window properties per page
- Built-in logging system
- TypeScript support with `@renweb/core` package
- Support for vanilla JavaScript and React applications

**Core Dependencies:**
- [webview](https://github.com/webview/webview) - Cross-platform webview library
- [spdlog](https://github.com/gabime/spdlog) - Fast C++ logging library  
- [nlohmann/json](https://github.com/nlohmann/json) - JSON for Modern C++
- [cpp-httplib](https://github.com/yhirose/cpp-httplib) - HTTP/HTTPS server library
- [Boost](https://www.boost.org/) - Program options and JSON parsing
- Standard C++ libraries (C++17 or later)

## Compilation

Clone with submodules:
```bash
git clone --recurse-submodules https://github.com/spur27/RenWeb.git
```

**Prerequisites (All Platforms):**
- C++ Compiler (g++ recommended, C++17 or later)
- [Make](https://www.gnu.org/software/make/)
- [Node.js](https://nodejs.org/) (for building UI pages)

### Linux

**Debian/Ubuntu:**
```bash
apt install libgtk-3-dev libwebkit2gtk-4.1-dev
apt install libgtk-3-0 libwebkit2gtk-4.1-0
apt install pkg-config libboost-all-dev
```

**Fedora/RHEL:**
```bash
dnf install gtk3-devel webkit2gtk4.1-devel
dnf install gtk3 webkit2gtk4.1
dnf install pkgconf-pkg-config boost-devel
```

**Build:**
```bash
cd RenWeb-engine
make
```

**Run:**
```bash
make run
# Or directly:
./programs/renweb-0.0.4-linux-x86_64
```

### MacOS
*Work in progress - See [WebKit build instructions](https://github.com/WebKit/webkit/blob/main/ReadMe.md#getting-the-code)*

### Windows
*Work in progress*

## File Structure

### Core Files

RenWeb looks for files relative to the executable location:

```
programs/
├── renweb-0.0.4-linux-x86_64    [executable]
├── info.json                     [application metadata - required]
├── config.json                   [window configuration - auto-generated]
├── log.txt                       [application logs - auto-generated]
├── content/                      [page content - required]
│   └── page/
│       ├── index.html
│       └── ...
├── assets/                       [shared assets]
│   └── ...
├── custom/                       [user customization - optional]
│   └── (overrides for content/assets)
├── backup/                       [fallback content - optional]
│   └── (emergency fallback files)
└── licenses/                     [license files]
    └── LICENSE
```

### Directory Structure

**`content/[page_name]/`** - Page-specific content
- Each page must have an `index.html`
- Additional CSS, JS, and assets can be included
- Generated by the build system from `RenWeb-npm/src/pages/`

**`assets/`** - Shared resources
- Images, videos, audio, fonts
- Accessible from any page via `../../assets/`
- Supports HTTP Range requests for media streaming

**`custom/`** - User customization directory (optional)
- Highest priority in file resolution
- Allows users to override default assets
- Enables easy theming without rebuilding

**`backup/`** - Fallback content (optional)
- Lowest priority in file resolution
- Emergency fallback if content is missing

## Configuration Files

### info.json

Application metadata file - **required** for RenWeb to run. Must be in the same directory as the executable.

**Example:**
```json
{
  "title": "RenWeb",
  "version": "0.0.4",
  "author": "Spur27",
  "description": "Base RenWeb engine",
  "license": "BSL",
  "repository": "https://github.com/spur27/RenWeb",
  "category": "Utility",
  "copyright": "Copyright © 2025 Spur27",
  "appId": "io.github.spur27.renweb",
  "starting_pages": ["test"],
  "config_path": "./config.json",
  "log_path": "./log.txt",
  "base_path": ".",
  "permissions": {
    "geolocation": false,
    "notifications": true,
    "media_devices": false,
    "pointer_lock": false,
    "install_missing_media_plugins": true,
    "device_info": true
  }
}
```

**Required Fields:**
- `title` - Application name (displayed with `-v` flag)
- `version` - Application version
- `starting_pages` - Array of page names to open on launch (or single string)

**Optional Fields:**
- `author` - Creator name
- `description` - Application description
- `license` - License type
- `repository` - Source repository URL
- `category` - Application category
- `copyright` - Copyright notice
- `appId` - Unique application identifier
- `config_path` - Path to config.json (defaults to `./config.json`)
- `log_path` - Path to log file (defaults to `./log.txt`)
- `base_path` - Base directory for content/assets/custom/backup folders (defaults to `.`)
- `permissions` - WebView permissions object

**Permissions:**
- `geolocation` - Allow location access
- `notifications` - Allow desktop notifications
- `media_devices` - Allow camera/microphone
- `pointer_lock` - Allow mouse pointer locking
- `install_missing_media_plugins` - Auto-install codecs
- `device_info` - Allow hardware information access

### config.json

Window configuration file - auto-generated if missing. Stores per-page window settings and global defaults.

**Example:**
```json
{
  "__defaults__": { ... },
  "test": {
    "__defaults__": { ... },
    "decorated": true,
    "size": {
      "width": 720,
      "height": 480
    },
    "position": {
      "x": 100,
      "y": 100
    },
    "keepabove": false,
    "resizable": true,
    "minimize": false,
    "maximize": false,
    "fullscreen": false,
    "taskbar_show": true,
    "opacity": 1.0,
    "initially_shown": true
  },
}
```

**Per-Page Settings:**

All window properties are get/set-able via the client API:

- `title` (string) - Window title text (optional, per-page only)
- `decorated` (boolean) - Show window title bar and borders
- `size` (object) - Window dimensions
  - `width` (number) - Window width in pixels
  - `height` (number) - Window height in pixels
- `position` (object) - Window position on screen
  - `x` (number) - X coordinate in pixels
  - `y` (number) - Y coordinate in pixels
- `keepabove` (boolean) - Keep window on top of others
- `resizable` (boolean) - Allow window resizing
- `minimize` (boolean) - Window minimized state
- `maximize` (boolean) - Window maximized state
- `fullscreen` (boolean) - Window fullscreen state
- `taskbar_show` (boolean) - Show window in taskbar/dock
- `opacity` (number) - Window opacity (0.0 = transparent, 1.0 = opaque)
- `initially_shown` (boolean) - Show window immediately on load (if `false`, must call `Window.show()`)

**Note:** 
- Settings are automatically saved when changed via the client API
- Any property not specified in a page's config inherits from `__defaults__`
- If `__defaults__` is not specified, hardcoded defaults are used
- `title` is page-specific and cannot be set in `__defaults__`

### File Resolution Order

When handling GET requests, the server searches in this order:

1. **`custom/[page_name]/[file]`** - User customization (highest priority)
2. **`content/[page_name]/[file]`** - Page-specific content
3. **`[file]`** - Root directory (for assets, info.json, etc.)
4. **`backup/[page_name]/[file]`** - Fallback content (lowest priority)

**Example:** Request for `/assets/logo.png` on page "test"
1. Checks `custom/test/assets/logo.png`
2. Checks `content/test/assets/logo.png`  
3. Checks `assets/logo.png`
4. Checks `backup/test/assets/logo.png`
5. Returns 404 if not found

This allows users to customize your application by placing files in `custom/` without modifying the original content.


## Command Line Arguments

```
Available Options:
  -h, --help                     Display help information
  -v, --version                  Display version from info.json
  
Logging:
  -ls, --log-silent             Suppress console log output
  -ll, --log-level <n>          Set log level (0=trace, 5=critical, default=2)
  -lc, --log-clear              Clear log.txt before starting
  
Server:
  -i, --ip <address>            Web server IP (default: 127.0.0.1)
  -p, --port <n>                Web server port (default: 8270)
  
Pages:
  -P, --pages <name> [names...] Open specific page(s) (default from info.json)
```
## Credits

This repository uses the following open-source libraries:

- [cpp-httplib](https://github.com/yhirose/cpp-httplib) - HTTP/HTTPS server library - [MIT License](./external/cpp-httplib/LICENSE)
- [spdlog](https://github.com/gabime/spdlog) - Fast C++ logging library - [MIT License](./external/spdlog/LICENSE)
- [webview](https://github.com/webview/webview) - Cross-platform webview library - [MIT License](./external/webview/LICENSE)
- [Boost](https://www.boost.org/) - C++ libraries (Program Options, JSON, Process) - [Boost Software License](https://www.boost.org/LICENSE_1_0.txt)

## Known Bugs
- Encoded objs aren't processed in `get_config` in API side

## License

Boost Software License - Version 1.0 - August 17th, 2003

Permission is hereby granted, free of charge, to any person or organization
obtaining a copy of the software and accompanying documentation covered by
this license (the "Software") to use, reproduce, display, distribute,
execute, and transmit the Software, and to prepare derivative works of the
Software, and to permit third-parties to whom the Software is furnished to
do so, all subject to the following:

The copyright notices in the Software and this entire statement, including
the above license grant, this restriction and the following disclaimer,
must be included in all copies of the Software, in whole or in part, and
all derivative works of the Software, unless such copies or derivative
works are solely in the form of machine-executable object code generated by
a source language processor.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT
SHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE
FOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE,
ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE.